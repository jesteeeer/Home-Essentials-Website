{% extends "base.html" %}
{% block content %}
<div class="admin-section">
  <h2>üõí Products Inventory</h2>
  <a href="{{ url_for('admin_dashboard') }}">‚Üê Back to Dashboard</a>
  <table>
    <thead>
      <tr>
        <th>ID</th><th>Name</th><th>Category</th><th>Price</th><th>Stock</th><th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for p in products %}
      <tr>
        <td>{{ p['id'] }}</td>
        <td>{{ p['name'] }}</td>
        <td>{{ p['category'] }}</td>
        <td>‚Ç±{{ '%.2f'|format(p['price']) }}</td>
        <td>
          {% if p['stock'] == 0 %}
            <span style="color:red;">Out of Stock</span>
          {% elif p['stock'] <= 5 %}
            <span style="color:orange;">Low ({{ p['stock'] }})</span>
          {% else %}
            {{ p['stock'] }}
          {% endif %}
        </td>
        <td>
          <form method="POST" action="{{ url_for('delete_product') }}" style="display:inline;">
            <input type="hidden" name="product_id" value="{{ p['id'] }}">
            <button type="submit">Delete</button>
          </form>
          <a href="{{ url_for('edit_product', product_id=p['id']) }}">Edit</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <h3>Add New Product</h3>
  <form method="POST" action="{{ url_for('add_product') }}">
    <input type="text" name="name" placeholder="Name" required>
    <input type="text" name="category" placeholder="Category" required>
    <input type="text" name="description" placeholder="Description" required>
    <input type="text" name="image" placeholder="Image Filename" required>
    <input type="number" step="0.01" name="price" placeholder="Price" required>
    <input type="number" name="stock" placeholder="Stock" required>
    <button type="submit">Add Product</button>
  </form>
</div>
{% endblock %}
